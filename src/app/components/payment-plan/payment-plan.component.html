<!-- Payment Plan Container -->
<div class="container-fluid payment-plan-container">
  <h2 class="text-center">Payment Plan </h2>

  <!-- Loading Spinner -->
  <div *ngIf="isLoading" class="text-center">
      <div class="spinner-border text-success" role="status">
          <span class="visually-hidden">Loading...</span>
      </div>
  </div>

  <!-- Error Message -->
  <div *ngIf="hasError" class="alert alert-danger text-center">
      Error loading installment plans. Please try again later.
  </div>

  <!-- Installment Plans Table -->
  <table *ngIf="!isLoading && !hasError && installmentPlans.length > 0" class="table table-bordered">
      <thead>
          <tr>
              <th>Serial No</th>
              <th>Plan Name</th>
              <th>Project Name</th>
              <th>Description</th>
              <th>Amount</th>
          </tr>
      </thead>
      <tbody>
          <tr *ngFor="let plan of installmentPlans">
              <td>{{ plan.serialNo }}</td>
              <td>{{ plan.planName }}</td>
              <td>{{ plan.projectName }}</td>
              <td>{{ plan.description }}</td>
              <td>{{ plan.amount | number:'1.0-2' }}</td>
          </tr>
      </tbody>
  </table>

  <!-- Floor Plan Image Section -->
  <div *ngIf="installmentPlans.length > 0" class="text-center">
      <h4 class="text-center">Floor Plan Image</h4>
      <ng-container *ngIf="installmentPlans[0].fileUpload; else noImage">
          <img [src]="'http://173.212.251.175:8085/' + installmentPlans[0].fileUpload" alt="Installment Plan Image" class="payment-plan-image" />
      </ng-container>
      <ng-template #noImage>
          <p>No floor plan image available</p>
      </ng-template>
  </div>

  <!-- Print Button (not printed) -->
  <div class="text-center mt-4 print-button">
      <button class="btn btn-success" (click)="printPage()">Print</button>
  </div>
</div>
